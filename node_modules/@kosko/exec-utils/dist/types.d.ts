/**
 * Utilities for executing processes.
 *
 * @packageDocumentation
 */

/// <reference types="node" />

import { StdioOptions } from 'node:child_process';

/**
 * @public
 */
export declare function booleanArg(name: string, value?: boolean): string[];

/**
 * Spawns a new child process.
 *
 * @throws {@link SpawnError}
 * Thrown if the process terminates with non-zero exit code.
 *
 * @public
 * @see {@link https://nodejs.org/dist/latest-v18.x/docs/api/child_process.html#child_processspawncommand-args-options | Node.js child_process.spawn}
 */
export declare function spawn(command: string, args?: readonly string[], options?: SpawnOptions): Promise<SpawnResult>;

/**
 * @public
 */
export declare class SpawnError extends Error {
    readonly exitCode: number;
    readonly command: string;
    readonly args: readonly string[];
    readonly stdout: string;
    readonly stderr: string;
    constructor(options: SpawnErrorOptions);
}

/**
 * @public
 */
export declare interface SpawnErrorOptions {
    exitCode: number;
    command: string;
    args: readonly string[];
    stdout: string;
    stderr: string;
}

/**
 * @public
 */
export declare interface SpawnOptions {
    /**
     * Current working directory (CWD).
     *
     * @defaultValue `process.cwd()`
     */
    cwd?: string;
    /**
     * Environment variables.
     *
     * @defaultValue `process.env`
     */
    env?: Record<string, string>;
    /**
     * @defaultValue `["pipe", "pipe", "pipe"]`
     */
    stdio?: StdioOptions;
    /**
     * Writes data to `stdin`. When this value is given, `stdio[0]` must be `pipe`.
     */
    input?: string;
}

/**
 * Output of stdout and stderr. When {@link SpawnOptions.stdio} is set to values
 * other than `pipe`, the result value will be an empty string.
 *
 * @public
 */
export declare interface SpawnResult {
    stdout: string;
    stderr: string;
}

/**
 * @public
 */
export declare function stringArg(name: string, value?: string): string[];

/**
 * @public
 */
export declare function stringArrayArg(name: string, values?: string[]): string[];

export { }
